@import "tailwindcss";

/* ═══════════════════════════════════════════════════════════════════════════
   CURSED HEARTS GRIMOIRE — ПОЛНАЯ ТЕМА
   Тёмное фэнтези UI для Owlbear Rodeo VTT Extension
   ═══════════════════════════════════════════════════════════════════════════ */

/* ═══════════════════════════════════════════════════════════════════════════
   CSS CUSTOM PROPERTIES
   ═══════════════════════════════════════════════════════════════════════════ */

:root {
  /* Фоны — от абсолютной тьмы до пергамента */
  --color-abyss: #030303;
  --color-obsidian: #080706;
  --color-dark: #0c0a09;
  --color-panel: #0f0d0c;
  --color-parchment: #1a1510;
  --color-parchment-light: #2a2218;

  /* Текст — оттенки старой кости */
  --color-bone: #d4c8b8;
  --color-ancient: #b8a892;
  --color-faded: #7a6f62;
  --color-dim: #4a433a;

  /* Золото — магия и богатство */
  --color-gold-bright: #ffd700;
  --color-gold: #d4a726;
  --color-gold-dark: #8b6914;
  --color-gold-shadow: rgba(212, 167, 38, 0.4);

  /* Кровь — урон и опасность */
  --color-blood-bright: #ff2a2a;
  --color-blood: #8b0000;
  --color-blood-dark: #4a0000;
  --color-blood-glow: rgba(139, 0, 0, 0.5);

  /* Мана — магическая энергия */
  --color-mana-bright: #4a9eff;
  --color-mana: #1a4a8b;
  --color-mana-dark: #0a2040;
  --color-mana-glow: rgba(74, 158, 255, 0.4);

  /* Исцеление — жизненная сила */
  --color-heal-bright: #00ff88;
  --color-heal: #228b22;
  --color-heal-dark: #0a3a0a;
  --color-heal-glow: rgba(34, 139, 34, 0.4);

  /* Огонь и угли */
  --color-ember: #ff6b35;
  --color-ember-glow: rgba(255, 107, 53, 0.4);

  /* Границы */
  --color-edge-bone: #3a332a;
  --color-edge-rust: #4a3020;
  --color-edge-gold: rgba(212, 167, 38, 0.3);
}

/* ═══════════════════════════════════════════════════════════════════════════
   TAILWIND @THEME
   ═══════════════════════════════════════════════════════════════════════════ */

@theme {
  /* Шрифты */
  --font-cinzel: 'Cinzel', serif;
  --font-cinzel-decorative: 'Cinzel Decorative', 'Cinzel', serif;
  --font-garamond: 'EB Garamond', Georgia, serif;
  --font-medieval: 'MedievalSharp', cursive;

  /* Цвета для Tailwind */
  --color-abyss: #030303;
  --color-obsidian: #080706;
  --color-dark: #0c0a09;
  --color-panel: #0f0d0c;
  --color-parchment: #1a1510;
  --color-parchment-light: #2a2218;
  --color-bone: #d4c8b8;
  --color-ancient: #b8a892;
  --color-faded: #7a6f62;
  --color-dim: #4a433a;
  --color-gold-bright: #ffd700;
  --color-gold: #d4a726;
  --color-gold-dark: #8b6914;
  --color-blood-bright: #ff2a2a;
  --color-blood: #8b0000;
  --color-blood-dark: #4a0000;
  --color-mana-bright: #4a9eff;
  --color-mana: #1a4a8b;
  --color-mana-dark: #0a2040;
  --color-heal-bright: #00ff88;
  --color-heal: #228b22;
  --color-heal-dark: #0a3a0a;
  --color-ember: #ff6b35;
  --color-edge-bone: #3a332a;
  --color-edge-rust: #4a3020;
}

/* ═══════════════════════════════════════════════════════════════════════════
   BASE STYLES
   ═══════════════════════════════════════════════════════════════════════════ */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body,
#root {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'EB Garamond', Georgia, serif;
  background-color: var(--color-abyss);
  color: var(--color-bone);
  font-size: 14px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
}

/* Текстурный оверлей — шум пергамента */
#root::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size: 180px 180px;
}

/* Виньетка по краям */
#root::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9998;
  pointer-events: none;
  background: radial-gradient(
    ellipse at center,
    transparent 40%,
    rgba(0, 0, 0, 0.4) 80%,
    rgba(0, 0, 0, 0.7) 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   SCROLLBAR — Тонкий с золотым градиентом
   ═══════════════════════════════════════════════════════════════════════════ */

::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

::-webkit-scrollbar-track {
  background: var(--color-obsidian);
  border-radius: 2px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(
    180deg,
    var(--color-gold-dark) 0%,
    var(--color-edge-rust) 50%,
    var(--color-gold-dark) 100%
  );
  border-radius: 2px;
  transition: background 0.2s;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(
    180deg,
    var(--color-gold) 0%,
    var(--color-gold-dark) 50%,
    var(--color-gold) 100%
  );
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-gold-dark) var(--color-obsidian);
}

/* ═══════════════════════════════════════════════════════════════════════════
   TYPOGRAPHY
   ═══════════════════════════════════════════════════════════════════════════ */

.heading {
  font-family: 'Cinzel', serif;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--color-gold);
}

.heading-decorative {
  font-family: 'Cinzel Decorative', serif;
  text-transform: uppercase;
  letter-spacing: 3px;
}

.font-cinzel {
  font-family: 'Cinzel', serif;
}

.font-garamond {
  font-family: 'EB Garamond', Georgia, serif;
}

/* ═══════════════════════════════════════════════════════════════════════════
   KEYFRAME ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════ */

/* Пульсация крови */
@keyframes pulse-blood {
  0%, 100% {
    opacity: 1;
    box-shadow: 
      inset 0 0 10px rgba(139, 0, 0, 0.3),
      0 0 8px var(--color-blood-glow);
  }
  50% {
    opacity: 0.7;
    box-shadow: 
      inset 0 0 20px rgba(139, 0, 0, 0.5),
      0 0 15px var(--color-blood-glow);
  }
}

/* Капля крови падает */
@keyframes blood-drip {
  0% {
    transform: translateY(-8px) scaleY(0.5);
    opacity: 0;
  }
  20% {
    opacity: 0.8;
    transform: translateY(0) scaleY(1);
  }
  100% {
    transform: translateY(30px) scaleY(1.5);
    opacity: 0;
  }
}

/* Мерцание маны */
@keyframes shimmer-mana {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

/* Полная мана — пульсирующее свечение */
@keyframes mana-full-glow {
  0%, 100% {
    box-shadow: 
      inset 0 0 10px rgba(74, 158, 255, 0.3),
      0 0 10px var(--color-mana-glow);
  }
  50% {
    box-shadow: 
      inset 0 0 15px rgba(74, 158, 255, 0.4),
      0 0 20px var(--color-mana-glow),
      0 0 30px rgba(74, 158, 255, 0.2);
  }
}

/* Разворачивающийся свиток */
@keyframes unfurl {
  0% {
    opacity: 0;
    transform: scaleY(0) scaleX(0.95);
  }
  60% {
    transform: scaleY(1.02) scaleX(1);
  }
  100% {
    opacity: 1;
    transform: scaleY(1) scaleX(1);
  }
}

/* Появление снизу */
@keyframes fade-up {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Появление справа (для тостов) */
@keyframes slide-in-right {
  0% {
    opacity: 0;
    transform: translateX(100%) scale(0.9);
  }
  100% {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

/* Модальное окно — появление сверху */
@keyframes modal-slide-down {
  0% {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Вращение руны */
@keyframes spin-rune {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Золотой пульс (для критов) */
@keyframes pulse-gold {
  0%, 100% {
    box-shadow: 0 0 5px var(--color-gold-shadow);
    filter: brightness(1);
  }
  50% {
    box-shadow: 0 0 12px var(--color-gold-shadow), 0 0 20px rgba(255, 215, 0, 0.2);
    filter: brightness(1.2);
  }
}

/* Парение */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

/* Тлеющий уголь */
@keyframes ember-glow {
  0%, 100% {
    opacity: 0.6;
    filter: brightness(1);
  }
  50% {
    opacity: 1;
    filter: brightness(1.3);
  }
}

/* Подъём частицы-уголька */
@keyframes ember-rise {
  0% {
    transform: translateY(0) translateX(0) scale(1);
    opacity: 0.8;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateY(-40px) translateX(10px) scale(0.5);
    opacity: 0;
  }
}

/* 3D переворот карты */
@keyframes card-flip-reveal {
  0% {
    transform: rotateY(180deg) scale(0.9);
    opacity: 0;
  }
  50% {
    transform: rotateY(90deg) scale(0.95);
  }
  100% {
    transform: rotateY(0deg) scale(1);
    opacity: 1;
  }
}

/* Переход вкладки */
@keyframes tab-page-in {
  0% {
    opacity: 0;
    transform: translateY(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Руна активируется (при нажатии кнопки) */
@keyframes rune-activate {
  0% {
    box-shadow: inset 0 0 0 0 var(--color-gold-shadow);
  }
  50% {
    box-shadow: 
      inset 0 0 20px 4px var(--color-gold-shadow),
      0 0 25px 5px var(--color-gold-shadow);
  }
  100% {
    box-shadow: inset 0 0 0 0 transparent;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   SCREEN EFFECTS — Эффекты на весь экран
   ═══════════════════════════════════════════════════════════════════════════ */

/* Тряска экрана */
@keyframes screen-shake {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-3px, -2px); }
  20% { transform: translate(3px, 1px); }
  30% { transform: translate(-2px, 2px); }
  40% { transform: translate(2px, -1px); }
  50% { transform: translate(-1px, 2px); }
  60% { transform: translate(3px, -2px); }
  70% { transform: translate(-2px, 1px); }
  80% { transform: translate(1px, -2px); }
  90% { transform: translate(-1px, 1px); }
}

.animate-screen-shake {
  animation: screen-shake 0.4s ease-out;
}

/* Золотая вспышка (крит) */
@keyframes screen-flash-gold {
  0% {
    box-shadow: inset 0 0 100px rgba(255, 215, 0, 0.4);
  }
  100% {
    box-shadow: inset 0 0 0 transparent;
  }
}

.screen-flash-gold {
  animation: screen-flash-gold 0.5s ease-out forwards;
}

/* Кровавая вспышка (урон) */
@keyframes screen-flash-blood {
  0% {
    box-shadow: inset 0 0 80px var(--color-blood-glow);
  }
  100% {
    box-shadow: inset 0 0 0 transparent;
  }
}

.screen-flash-blood {
  animation: screen-flash-blood 0.4s ease-out forwards;
}

/* Зелёное свечение (исцеление) */
@keyframes screen-heal-glow {
  0% {
    box-shadow: inset 0 0 60px var(--color-heal-glow);
  }
  100% {
    box-shadow: inset 0 0 0 transparent;
  }
}

.screen-heal-glow {
  animation: screen-heal-glow 0.6s ease-out forwards;
}

/* ═══════════════════════════════════════════════════════════════════════════
   EFFECTS LAYER — Слой эффектов
   ═══════════════════════════════════════════════════════════════════════════ */

.fx-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9990;
}

.fx-crit {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at center,
    rgba(255, 215, 0, 0.3) 0%,
    rgba(212, 167, 38, 0.15) 40%,
    transparent 70%
  );
  animation: fade-out 0.6s ease-out forwards;
}

.fx-fail {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at center,
    transparent 30%,
    rgba(139, 0, 0, 0.3) 100%
  );
  animation: fade-out 0.5s ease-out forwards;
}

.fx-heal {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at center,
    rgba(34, 139, 34, 0.2) 0%,
    transparent 60%
  );
  animation: fade-out 0.7s ease-out forwards;
}

@keyframes fade-out {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   UTILITY ANIMATION CLASSES
   ═══════════════════════════════════════════════════════════════════════════ */

.animate-unfurl {
  animation: unfurl 0.4s ease-out forwards;
  transform-origin: top center;
}

.animate-fade-up {
  animation: fade-up 0.3s ease-out;
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-pulse-blood {
  animation: pulse-blood 1.5s ease-in-out infinite;
}

.animate-shimmer-mana {
  animation: shimmer-mana 2.5s linear infinite;
}

.animate-ember-glow {
  animation: ember-glow 2s ease-in-out infinite;
}

.animate-card-flip {
  animation: card-flip-reveal 0.6s ease-out forwards;
}

.tab-content-enter {
  animation: tab-page-in 0.25s ease-out;
}

/* ═══════════════════════════════════════════════════════════════════════════
   HP BAR — Сосуд с кровью
   ═══════════════════════════════════════════════════════════════════════════ */

.hp-bar-wrap {
  position: relative;
  height: 24px;
  border-radius: 12px;
  overflow: hidden;
  /* Стеклянный сосуд */
  background: radial-gradient(
    ellipse at 50% 0%,
    rgba(60, 20, 20, 0.6) 0%,
    #1a0505 40%,
    #0a0202 100%
  );
  border: 1px solid rgba(80, 20, 20, 0.6);
  box-shadow: 
    inset 0 2px 6px rgba(0, 0, 0, 0.8),
    inset 0 -1px 3px rgba(139, 0, 0, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.5);
}

.hp-bar-fill {
  height: 100%;
  border-radius: 11px;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  /* Кровавый градиент */
  background: linear-gradient(
    180deg,
    #cc2020 0%,
    #a01515 20%,
    #8b0000 50%,
    #600000 80%,
    #400000 100%
  );
  box-shadow: 
    inset 0 2px 4px rgba(255, 100, 100, 0.3),
    inset 0 -2px 4px rgba(0, 0, 0, 0.4),
    0 0 10px var(--color-blood-glow);
}

/* Блик на поверхности крови */
.hp-bar-fill::before {
  content: '';
  position: absolute;
  top: 2px;
  left: 5%;
  right: 15%;
  height: 4px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 150, 150, 0.2) 30%,
    rgba(255, 200, 200, 0.25) 50%,
    rgba(255, 150, 150, 0.2) 70%,
    transparent
  );
  border-radius: 2px;
}

/* Пузырьки в крови */
.hp-bar-fill::after {
  content: '';
  position: absolute;
  bottom: 4px;
  right: 10px;
  width: 4px;
  height: 4px;
  background: rgba(255, 120, 120, 0.2);
  border-radius: 50%;
  box-shadow: 
    -14px -2px 0 1px rgba(255, 100, 100, 0.15),
    -30px 1px 0 rgba(255, 100, 100, 0.12),
    -45px -1px 0 rgba(255, 100, 100, 0.1);
}

.hp-bar-label {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel', serif;
  font-size: 11px;
  font-weight: 700;
  color: #fff;
  text-shadow: 
    0 1px 3px rgba(0, 0, 0, 0.9),
    0 0 10px rgba(139, 0, 0, 0.5);
  z-index: 2;
  letter-spacing: 1px;
  pointer-events: none;
}

/* Низкий HP — пульсация и капли */
.hp-bar-low .hp-bar-fill {
  animation: pulse-blood 1.5s ease-in-out infinite;
}

.hp-bar-low::before {
  content: '';
  position: absolute;
  top: 100%;
  left: 20%;
  width: 3px;
  height: 8px;
  background: linear-gradient(180deg, var(--color-blood), transparent);
  border-radius: 0 0 2px 2px;
  animation: blood-drip 2s ease-in infinite;
  animation-delay: 0s;
}

.hp-bar-low::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 60%;
  width: 2px;
  height: 6px;
  background: linear-gradient(180deg, var(--color-blood), transparent);
  border-radius: 0 0 2px 2px;
  animation: blood-drip 2.5s ease-in infinite;
  animation-delay: 0.7s;
}

/* ═══════════════════════════════════════════════════════════════════════════
   MANA BAR — Магический кристалл
   ═══════════════════════════════════════════════════════════════════════════ */

.mana-bar-wrap {
  position: relative;
  height: 20px;
  border-radius: 10px;
  overflow: hidden;
  /* Кристаллический контейнер */
  background: radial-gradient(
    ellipse at 50% 0%,
    rgba(20, 40, 80, 0.5) 0%,
    #060815 40%,
    #030510 100%
  );
  border: 1px solid rgba(30, 60, 120, 0.5);
  box-shadow: 
    inset 0 2px 6px rgba(0, 0, 0, 0.8),
    inset 0 -1px 3px rgba(74, 158, 255, 0.15),
    0 1px 2px rgba(0, 0, 0, 0.5);
}

.mana-bar-fill {
  height: 100%;
  border-radius: 9px;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  /* Магический градиент с shimmer */
  background: 
    linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.1) 50%,
      transparent
    ),
    linear-gradient(
      180deg,
      #5aabff 0%,
      #3a8aee 20%,
      #1a5abb 50%,
      #0a3a8b 80%,
      #052050 100%
    );
  background-size: 200% 100%, 100% 100%;
  animation: shimmer-mana 3s linear infinite;
  box-shadow: 
    inset 0 2px 4px rgba(150, 200, 255, 0.3),
    inset 0 -2px 4px rgba(0, 0, 0, 0.4),
    0 0 10px var(--color-mana-glow);
}

/* Кристаллическая грань */
.mana-bar-fill::before {
  content: '';
  position: absolute;
  top: 2px;
  left: 10%;
  width: 35%;
  height: 3px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(180, 220, 255, 0.3),
    transparent
  );
  border-radius: 2px;
}

/* Магические искры */
.mana-bar-fill::after {
  content: '';
  position: absolute;
  top: 50%;
  right: 12px;
  width: 3px;
  height: 3px;
  background: rgba(200, 230, 255, 0.6);
  border-radius: 50%;
  box-shadow: 
    -18px -4px 0 rgba(200, 230, 255, 0.4),
    -35px 2px 0 rgba(200, 230, 255, 0.3),
    -55px -1px 0 rgba(200, 230, 255, 0.35);
  animation: ember-glow 2s ease-in-out infinite;
}

.mana-bar-label {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel', serif;
  font-size: 10px;
  font-weight: 700;
  color: var(--color-mana-bright);
  text-shadow: 
    0 1px 3px rgba(0, 0, 0, 0.9),
    0 0 8px rgba(74, 158, 255, 0.4);
  z-index: 2;
  letter-spacing: 1px;
  pointer-events: none;
}

/* Полная мана — усиленное свечение */
.mana-bar-full .mana-bar-fill {
  animation: shimmer-mana 3s linear infinite, mana-full-glow 2s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════════════════════════════════
   PANEL — Страница гримуара с орнаментальными углами
   ═══════════════════════════════════════════════════════════════════════════ */

.panel {
  position: relative;
  background: 
    /* Текстура пергамента */
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      rgba(30, 25, 20, 0.03) 2px,
      rgba(30, 25, 20, 0.03) 4px
    ),
    linear-gradient(
      160deg,
      var(--color-panel) 0%,
      var(--color-obsidian) 100%
    );
  border: 1px solid var(--color-edge-bone);
  border-radius: 2px;
  box-shadow: 
    inset 0 1px 0 rgba(212, 167, 38, 0.05),
    0 2px 4px rgba(0, 0, 0, 0.5);
}

/* Орнаментальные углы — верхние */
.panel::before,
.panel::after {
  content: '';
  position: absolute;
  width: 10px;
  height: 10px;
  border: 2px solid var(--color-gold-dark);
  opacity: 0.5;
  pointer-events: none;
}

.panel::before {
  top: -1px;
  left: -1px;
  border-right: none;
  border-bottom: none;
  border-top-left-radius: 2px;
}

.panel::after {
  top: -1px;
  right: -1px;
  border-left: none;
  border-bottom: none;
  border-top-right-radius: 2px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION HEADER — Заголовок секции
   ═══════════════════════════════════════════════════════════════════════════ */

.section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-bottom: 1px solid var(--color-edge-bone);
  background: linear-gradient(
    90deg,
    rgba(212, 167, 38, 0.05) 0%,
    transparent 50%,
    rgba(212, 167, 38, 0.05) 100%
  );
  position: relative;
  cursor: default;
  user-select: none;
}

/* Декоративная золотая линия под заголовком */
.section-header::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 10%;
  right: 10%;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    var(--color-gold-dark),
    transparent
  );
}

.section-header h3 {
  flex: 1;
  font-family: 'Cinzel', serif;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--color-gold);
  margin: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.section-header.collapsible {
  cursor: pointer;
}

.section-header.collapsible:hover h3 {
  text-shadow: 0 0 8px var(--color-gold-shadow);
}

.section-header .collapse-icon {
  color: var(--color-faded);
  font-size: 10px;
  transition: transform 0.2s ease;
}

/* ═══════════════════════════════════════════════════════════════════════════
   BUTTONS — Руны-печати
   ═══════════════════════════════════════════════════════════════════════════ */

.btn {
  font-family: 'Cinzel', serif;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-size: 11px;
  cursor: pointer;
  border: 1px solid;
  min-width: 60px;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
  transition: all 0.25s ease;
  border-radius: 2px;
  padding: 6px 12px;
}

/* Сияние при наведении */
.btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at center,
    rgba(255, 255, 255, 0.1),
    transparent 70%
  );
  opacity: 0;
  transition: opacity 0.25s;
  pointer-events: none;
}

.btn:hover:not(:disabled)::before {
  opacity: 1;
}

.btn:active:not(:disabled) {
  animation: rune-activate 0.4s ease-out;
  transform: scale(0.97);
}

.btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  filter: grayscale(0.4);
}

/* Золотая кнопка (основная) */
.btn-gold {
  background: linear-gradient(
    150deg,
    var(--color-gold-dark) 0%,
    var(--color-panel) 45%,
    var(--color-gold-dark) 100%
  );
  border-color: var(--color-gold);
  color: var(--color-gold-bright);
  text-shadow: 0 0 8px var(--color-gold-shadow);
}

.btn-gold:hover:not(:disabled) {
  box-shadow: 
    0 0 15px var(--color-gold-shadow),
    inset 0 0 10px rgba(212, 167, 38, 0.1);
  border-color: var(--color-gold-bright);
}

/* Кровавая кнопка (опасность) */
.btn-blood,
.btn-danger {
  background: linear-gradient(
    150deg,
    var(--color-blood-dark) 0%,
    var(--color-panel) 45%,
    var(--color-blood-dark) 100%
  );
  border-color: var(--color-blood);
  color: var(--color-blood-bright);
  text-shadow: 0 0 8px var(--color-blood-glow);
}

.btn-blood:hover:not(:disabled),
.btn-danger:hover:not(:disabled) {
  box-shadow: 
    0 0 15px var(--color-blood-glow),
    inset 0 0 10px rgba(139, 0, 0, 0.1);
  border-color: var(--color-blood-bright);
}

/* Магическая кнопка (мана) */
.btn-mana {
  background: linear-gradient(
    150deg,
    var(--color-mana-dark) 0%,
    var(--color-panel) 45%,
    var(--color-mana-dark) 100%
  );
  border-color: var(--color-mana);
  color: var(--color-mana-bright);
  text-shadow: 0 0 8px var(--color-mana-glow);
}

.btn-mana:hover:not(:disabled) {
  box-shadow: 
    0 0 15px var(--color-mana-glow),
    inset 0 0 10px rgba(74, 158, 255, 0.1);
  border-color: var(--color-mana-bright);
}

/* Зелёная кнопка (успех/исцеление) */
.btn-success {
  background: linear-gradient(
    150deg,
    var(--color-heal-dark) 0%,
    var(--color-panel) 45%,
    var(--color-heal-dark) 100%
  );
  border-color: var(--color-heal);
  color: var(--color-heal-bright);
  text-shadow: 0 0 8px var(--color-heal-glow);
}

.btn-success:hover:not(:disabled) {
  box-shadow: 
    0 0 15px var(--color-heal-glow),
    inset 0 0 10px rgba(34, 139, 34, 0.1);
  border-color: var(--color-heal-bright);
}

/* Вторичная кнопка */
.btn-secondary {
  background: linear-gradient(
    150deg,
    var(--color-parchment) 0%,
    var(--color-panel) 100%
  );
  border-color: var(--color-edge-bone);
  color: var(--color-faded);
}

.btn-secondary:hover:not(:disabled) {
  border-color: var(--color-ancient);
  color: var(--color-bone);
  box-shadow: 0 0 8px rgba(58, 51, 42, 0.4);
}

/* ═══════════════════════════════════════════════════════════════════════════
   INPUTS — Поля ввода
   ═══════════════════════════════════════════════════════════════════════════ */

input,
select,
textarea {
  font-family: 'EB Garamond', Georgia, serif;
  background: var(--color-obsidian);
  border: 1px solid var(--color-edge-bone);
  color: var(--color-bone);
  padding: 8px 10px;
  border-radius: 2px;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
select:focus,
textarea:focus {
  outline: none;
  border-color: var(--color-gold);
  box-shadow: 
    0 0 10px var(--color-gold-shadow),
    inset 0 0 4px rgba(212, 167, 38, 0.05);
}

input::placeholder,
textarea::placeholder {
  color: var(--color-dim);
}

input[type="number"] {
  -moz-appearance: textfield;
}

input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

select {
  padding-right: 30px;
  appearance: none;
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%237a6f62'%3E%3Cpath d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
}

/* ═══════════════════════════════════════════════════════════════════════════
   MODAL — Развёрнутый свиток
   ═══════════════════════════════════════════════════════════════════════════ */

.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(3, 3, 3, 0.88);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  animation: fade-up 0.2s ease-out;
}

.modal-box {
  background: linear-gradient(
    180deg,
    var(--color-dark) 0%,
    var(--color-abyss) 100%
  );
  border: 1px solid var(--color-gold-dark);
  border-radius: 4px;
  box-shadow: 
    0 0 40px rgba(0, 0, 0, 0.9),
    0 0 15px var(--color-gold-shadow);
  max-height: calc(100vh - 48px);
  width: calc(100% - 24px);
  max-width: 400px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: modal-slide-down 0.3s ease-out;
}

.modal-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-edge-bone);
  background: linear-gradient(
    90deg,
    rgba(212, 167, 38, 0.06) 0%,
    transparent 50%,
    rgba(212, 167, 38, 0.06) 100%
  );
}

.modal-head h2 {
  font-family: 'Cinzel', serif;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--color-gold);
  margin: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.modal-content {
  padding: 16px;
  overflow-y: auto;
  flex: 1;
}

/* ═══════════════════════════════════════════════════════════════════════════
   TOAST — Горящий свиток
   ═══════════════════════════════════════════════════════════════════════════ */

.toast {
  position: relative;
  padding: 10px 14px 10px 18px;
  border-radius: 3px;
  font-family: 'EB Garamond', Georgia, serif;
  font-size: 13px;
  background: var(--color-parchment);
  border: 1px solid var(--color-edge-bone);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  max-width: 300px;
  animation: slide-in-right 0.3s ease-out;
  overflow: hidden;
}

/* Цветная полоска слева */
.toast::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
}

.toast-success {
  border-color: var(--color-heal);
}
.toast-success::before {
  background: var(--color-heal);
}

.toast-error {
  border-color: var(--color-blood);
}
.toast-error::before {
  background: var(--color-blood);
}

.toast-warning {
  border-color: var(--color-gold-dark);
}
.toast-warning::before {
  background: var(--color-gold);
}

.toast-info {
  border-color: var(--color-mana);
}
.toast-info::before {
  background: var(--color-mana);
}

/* ═══════════════════════════════════════════════════════════════════════════
   SUB TABS — Под-вкладки
   ═══════════════════════════════════════════════════════════════════════════ */

.sub-tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.sub-tab {
  padding: 6px 12px;
  font-family: 'Cinzel', serif;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  border: 1px solid transparent;
  background: var(--color-obsidian);
  color: var(--color-faded);
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 2px;
  white-space: nowrap;
}

.sub-tab:hover {
  color: var(--color-ancient);
  background: var(--color-dark);
}

.sub-tab-active {
  background: rgba(139, 105, 20, 0.2);
  color: var(--color-gold);
  border-color: var(--color-gold-dark);
  box-shadow: 0 0 8px rgba(212, 167, 38, 0.2);
}

/* ═══════════════════════════════════════════════════════════════════════════
   DICE RESULT — Развернувшийся свиток с результатами
   ═══════════════════════════════════════════════════════════════════════════ */

.dice-card {
  background: linear-gradient(
    160deg,
    var(--color-parchment) 0%,
    var(--color-obsidian) 100%
  );
  border: 1px solid var(--color-edge-bone);
  border-radius: 3px;
  padding: 10px 12px;
  animation: unfurl 0.4s ease-out forwards;
  transform-origin: top center;
}

.dice-card-crit {
  border-color: var(--color-gold);
  box-shadow: 
    0 0 15px var(--color-gold-shadow),
    inset 0 0 30px rgba(212, 167, 38, 0.05);
  background: linear-gradient(
    160deg,
    rgba(139, 105, 20, 0.15) 0%,
    var(--color-parchment) 30%,
    var(--color-obsidian) 100%
  );
}

.dice-card-fail {
  border-color: var(--color-blood);
  box-shadow: 0 0 10px var(--color-blood-glow);
  background: linear-gradient(
    160deg,
    rgba(139, 0, 0, 0.1) 0%,
    var(--color-parchment) 30%,
    var(--color-obsidian) 100%
  );
}

/* Грань кубика */
.die-face {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  padding: 0 4px;
  border: 1px solid var(--color-edge-bone);
  border-radius: 3px;
  background: var(--color-obsidian);
  font-family: 'Cinzel', serif;
  font-size: 12px;
  font-weight: 700;
  color: var(--color-bone);
}

.die-face-crit {
  border-color: var(--color-gold);
  color: var(--color-gold-bright);
  background: rgba(139, 105, 20, 0.25);
  box-shadow: 0 0 8px var(--color-gold-shadow);
  animation: pulse-gold 1s ease-in-out infinite;
}

.die-face-fail {
  border-color: var(--color-blood);
  color: var(--color-blood-bright);
  background: rgba(139, 0, 0, 0.2);
}

/* Сумма броска */
.dice-total {
  font-family: 'Cinzel', serif;
  font-size: 20px;
  font-weight: 700;
}

.dice-crit {
  color: var(--color-gold-bright);
  text-shadow: 0 0 12px var(--color-gold), 0 0 24px var(--color-gold-shadow);
}

.dice-fail {
  color: var(--color-blood-bright);
  text-shadow: 0 0 12px var(--color-blood), 0 0 24px var(--color-blood-glow);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMBAT LOG — Лог боя
   ═══════════════════════════════════════════════════════════════════════════ */

.combat-log {
  background: var(--color-obsidian);
  border: 1px solid var(--color-edge-bone);
  border-radius: 2px;
  padding: 8px;
  max-height: 200px;
  overflow-y: auto;
  font-family: 'EB Garamond', Georgia, serif;
  font-size: 13px;
}

.combat-log-line {
  padding: 3px 0;
  border-bottom: 1px solid rgba(58, 51, 42, 0.25);
  line-height: 1.4;
  animation: fade-up 0.15s ease-out;
}

.combat-log-line:last-child {
  border-bottom: none;
}

.log-section {
  color: var(--color-gold);
  font-family: 'Cinzel', serif;
  font-size: 10px;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 1px;
  padding-top: 6px;
}

.log-crit {
  color: var(--color-gold-bright);
  text-shadow: 0 0 6px var(--color-gold-shadow);
}

.log-hit {
  color: var(--color-heal-bright);
}

.log-miss {
  color: var(--color-blood-bright);
}

.log-mana {
  color: var(--color-mana-bright);
}

.log-damage {
  color: var(--color-ember);
}

.log-info {
  color: var(--color-faded);
}

/* ═══════════════════════════════════════════════════════════════════════════
   LOADING SPINNER — Вращающаяся руна
   ═══════════════════════════════════════════════════════════════════════════ */

.rune-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--color-edge-bone);
  border-top-color: var(--color-gold);
  border-right-color: var(--color-gold-dark);
  border-radius: 50%;
  animation: spin-rune 0.9s linear infinite;
  box-shadow: 
    0 0 10px var(--color-gold-shadow),
    inset 0 0 5px rgba(0, 0, 0, 0.3);
}

/* ═══════════════════════════════════════════════════════════════════════════
   TABS — Основные вкладки
   ═══════════════════════════════════════════════════════════════════════════ */

.tab-active {
  background: linear-gradient(
    180deg,
    var(--color-panel) 0%,
    var(--color-parchment) 100%
  );
  color: var(--color-gold);
  position: relative;
}

.tab-active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 15%;
  right: 15%;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    var(--color-gold),
    transparent
  );
}

.tab-inactive {
  background: var(--color-obsidian);
  color: var(--color-dim);
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
}

.tab-inactive:hover {
  color: var(--color-faded);
  background: var(--color-dark);
}

/* ═══════════════════════════════════════════════════════════════════════════
   CARD 3D FLIP — Для карт Рока
   ═══════════════════════════════════════════════════════════════════════════ */

.card-3d {
  perspective: 1000px;
}

.card-3d-inner {
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s ease;
}

/* Рубашка карты */
.card-front {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  transform: rotateY(180deg);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  /* Орнамент на рубашке */
  background: 
    /* Центральный символ */
    radial-gradient(
      ellipse at center,
      rgba(212, 167, 38, 0.1) 0%,
      transparent 50%
    ),
    /* Угловой узор */
    repeating-linear-gradient(
      45deg,
      var(--color-gold-dark) 0px,
      var(--color-gold-dark) 1px,
      transparent 1px,
      transparent 10px
    ),
    repeating-linear-gradient(
      -45deg,
      var(--color-gold-dark) 0px,
      var(--color-gold-dark) 1px,
      transparent 1px,
      transparent 10px
    ),
    linear-gradient(
      160deg,
      #1a1510 0%,
      #0c0a08 50%,
      #1a1510 100%
    );
  border: 2px solid var(--color-gold-dark);
  box-shadow: 
    inset 0 0 20px rgba(0, 0, 0, 0.5),
    0 4px 12px rgba(0, 0, 0, 0.5);
}

.card-front::before {
  content: '';
  position: absolute;
  inset: 6px;
  border: 1px solid rgba(212, 167, 38, 0.2);
  border-radius: 2px;
  pointer-events: none;
}

.card-front-symbol {
  font-size: 48px;
  filter: drop-shadow(0 0 10px var(--color-gold-shadow));
  animation: ember-glow 3s ease-in-out infinite;
}

/* Лицевая сторона карты */
.card-back {
  backface-visibility: hidden;
  border-radius: 4px;
  overflow: hidden;
}

.rok-card {
  perspective: 1000px;
}

.rok-card-inner {
  position: relative;
  transform-style: preserve-3d;
}

.rok-card-inner.is-flipping {
  animation: card-flip-reveal 0.6s ease-out forwards;
}

/* Стили для результатов карт */
.rok-card-hit {
  background: linear-gradient(
    160deg,
    rgba(139, 105, 20, 0.12) 0%,
    var(--color-parchment) 20%,
    var(--color-obsidian) 100%
  );
  border: 1px solid var(--color-gold);
  box-shadow: 
    0 0 15px var(--color-gold-shadow),
    inset 0 0 20px rgba(212, 167, 38, 0.03);
}

.rok-card-miss {
  background: linear-gradient(
    160deg,
    rgba(40, 35, 30, 0.8) 0%,
    var(--color-obsidian) 100%
  );
  border: 1px solid var(--color-edge-bone);
  opacity: 0.85;
}

.rok-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 8px;
  margin-bottom: 8px;
  border-bottom: 1px solid var(--color-edge-bone);
}

.rok-card-number {
  font-family: 'Cinzel Decorative', serif;
  font-size: 18px;
  color: var(--color-gold);
  text-shadow: 0 0 8px var(--color-gold-shadow);
}

.rok-card-status {
  font-family: 'Cinzel', serif;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 2px 8px;
  border-radius: 2px;
}

.rok-card-status-hit {
  color: var(--color-heal-bright);
  background: rgba(34, 139, 34, 0.15);
  border: 1px solid var(--color-heal);
}

.rok-card-status-miss {
  color: var(--color-blood-bright);
  background: rgba(139, 0, 0, 0.15);
  border: 1px solid var(--color-blood);
  opacity: 0.7;
}

.rok-card-effect {
  font-family: 'Cinzel', serif;
  font-size: 12px;
  color: var(--color-ancient);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.rok-card-desc {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  color: var(--color-faded);
  font-style: italic;
  margin-top: 4px;
  line-height: 1.4;
}

.rok-card-rolls {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(58, 51, 42, 0.3);
}

.rok-card-roll-item {
  font-family: 'EB Garamond', serif;
  font-size: 11px;
  color: var(--color-bone);
  padding: 2px 0;
}

.rok-card-badge {
  display: inline-block;
  font-family: 'Cinzel', serif;
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 3px 8px;
  border-radius: 2px;
  margin-top: 8px;
}

.rok-card-badge-recursive {
  color: var(--color-mana-bright);
  background: rgba(74, 158, 255, 0.1);
  border: 1px solid var(--color-mana);
}

.rok-card-badge-extra {
  color: var(--color-gold-bright);
  background: rgba(255, 215, 0, 0.1);
  border: 1px solid var(--color-gold);
  animation: pulse-gold 2s ease-in-out infinite;
}

/* Счётчик колоды */
.deck-counter {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px;
  background: radial-gradient(
    ellipse at center,
    rgba(212, 167, 38, 0.05) 0%,
    transparent 70%
  );
}

.deck-counter-number {
  font-family: 'Cinzel Decorative', serif;
  font-size: 42px;
  line-height: 1;
  color: var(--color-gold);
  text-shadow: 0 0 20px var(--color-gold-shadow);
}

.deck-counter-number.low {
  color: var(--color-blood-bright);
  text-shadow: 0 0 20px var(--color-blood-glow);
  animation: pulse-blood 1s ease-in-out infinite;
}

.deck-counter-number.empty {
  animation: do-fail-shake 0.5s ease-out infinite;
}

.deck-counter-label {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--color-faded);
  margin-top: 4px;
}

.deck-counter-name {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: var(--color-ancient);
  margin-bottom: 8px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   STATUS BAR — Панель состояния
   ═══════════════════════════════════════════════════════════════════════════ */

.status-bar {
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 8px;
  background: linear-gradient(
    180deg,
    var(--color-obsidian) 0%,
    var(--color-abyss) 100%
  );
  border-top: 1px solid var(--color-edge-bone);
  font-family: 'Cinzel', serif;
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
}

.status-bar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 10%;
  right: 10%;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    var(--color-gold-dark),
    transparent
  );
}

.status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  display: inline-block;
  margin-right: 4px;
}

.status-dot-on {
  background: var(--color-heal);
  box-shadow: 0 0 6px var(--color-heal-glow);
}

.status-dot-off {
  background: var(--color-blood-bright);
  box-shadow: 0 0 4px var(--color-blood-glow);
}

.status-dot-none {
  background: var(--color-dim);
}

/* ═══════════════════════════════════════════════════════════════════════════
   PORTRAIT — Портрет персонажа
   ═══════════════════════════════════════════════════════════════════════════ */

.portrait-frame {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid var(--color-gold-dark);
  overflow: hidden;
  background: var(--color-obsidian);
  box-shadow: 
    0 0 8px var(--color-gold-shadow),
    inset 0 0 10px rgba(0, 0, 0, 0.5);
  flex-shrink: 0;
}

.portrait-frame img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.portrait-frame::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 50%;
  box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.6);
  pointer-events: none;
}

/* ═══════════════════════════════════════════════════════════════════════════
   EXPAND BUTTON — Кнопка расширения окна
   ═══════════════════════════════════════════════════════════════════════════ */

.expand-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--color-edge-bone);
  background: var(--color-obsidian);
  color: var(--color-faded);
  border-radius: 2px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 14px;
  flex-shrink: 0;
}

.expand-btn:hover {
  border-color: var(--color-gold-dark);
  color: var(--color-gold);
  box-shadow: 0 0 8px var(--color-gold-shadow);
}

/* ═══════════════════════════════════════════════════════════════════════════
   DICE OVERLAY — Большой оверлей результата броска
   ═══════════════════════════════════════════════════════════════════════════ */

.dice-overlay {
  position: fixed;
  inset: 0;
  z-index: 9994;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  transition: 
    opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1),
    transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.dice-overlay-enter {
  opacity: 0;
  transform: scale(0.3);
}

.dice-overlay-show {
  opacity: 1;
  transform: scale(1);
}

.dice-overlay-exit {
  opacity: 0;
  transform: scale(1.15) translateY(-30px);
}

.dice-overlay-normal {
  background: radial-gradient(
    ellipse at center,
    rgba(15, 13, 12, 0.95) 0%,
    rgba(3, 3, 3, 0.8) 60%,
    transparent 100%
  );
}

.dice-overlay-crit {
  background: radial-gradient(
    ellipse at center,
    rgba(60, 45, 0, 0.95) 0%,
    rgba(30, 20, 0, 0.85) 40%,
    rgba(3, 3, 3, 0.65) 70%,
    transparent 100%
  );
}

.dice-overlay-fail {
  background: radial-gradient(
    ellipse at center,
    rgba(60, 0, 0, 0.95) 0%,
    rgba(30, 0, 0, 0.85) 40%,
    rgba(3, 3, 3, 0.65) 70%,
    transparent 100%
  );
}

.dice-overlay-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 24px;
}

.dice-overlay-player {
  font-family: 'Cinzel', serif;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 4px;
  color: var(--color-ancient);
  margin-bottom: 4px;
}

.dice-overlay-label {
  font-family: 'EB Garamond', serif;
  font-size: 15px;
  color: var(--color-bone);
  margin-bottom: 12px;
  opacity: 0.9;
}

.dice-overlay-number {
  font-family: 'Cinzel Decorative', serif;
  font-size: 72px;
  line-height: 1;
  color: var(--color-bone);
  text-shadow: 0 4px 30px rgba(0, 0, 0, 0.9);
  margin-bottom: 8px;
  animation: do-number-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

.do-num-crit {
  color: var(--color-gold-bright);
  text-shadow: 
    0 0 40px rgba(255, 215, 0, 0.8),
    0 0 80px var(--color-gold-shadow),
    0 4px 30px rgba(0, 0, 0, 0.9);
  animation: 
    do-number-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both,
    do-crit-glow 1s ease-in-out 0.3s infinite;
}

.do-num-fail {
  color: var(--color-blood-bright);
  text-shadow: 
    0 0 40px rgba(255, 42, 42, 0.8),
    0 0 80px var(--color-blood-glow),
    0 4px 30px rgba(0, 0, 0, 0.9);
  animation: 
    do-number-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both,
    do-fail-shake 0.4s ease-out 0.3s;
}

@keyframes do-number-pop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  60% {
    transform: scale(1.15);
    opacity: 1;
  }
  100% {
    transform: scale(1);
  }
}

@keyframes do-crit-glow {
  0%, 100% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(1.3);
  }
}

@keyframes do-fail-shake {
  0%, 100% { transform: translateX(0); }
  15% { transform: translateX(-8px) rotate(-2deg); }
  30% { transform: translateX(8px) rotate(2deg); }
  45% { transform: translateX(-6px); }
  60% { transform: translateX(6px); }
  75% { transform: translateX(-3px); }
  90% { transform: translateX(3px); }
}

.dice-overlay-rolls {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: var(--color-faded);
  margin-bottom: 12px;
  animation: fade-up 0.3s ease-out 0.15s both;
}

.dice-overlay-badge {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 3px;
  padding: 6px 20px;
  border-radius: 2px;
  animation: fade-up 0.3s ease-out 0.25s both;
}

.do-badge-crit {
  color: var(--color-gold-bright);
  border: 1px solid var(--color-gold);
  background: rgba(212, 167, 38, 0.15);
  box-shadow: 0 0 25px var(--color-gold-shadow);
}

.do-badge-fail {
  color: var(--color-blood-bright);
  border: 1px solid var(--color-blood);
  background: rgba(139, 0, 0, 0.15);
  box-shadow: 0 0 25px var(--color-blood-glow);
}

/* ═══════════════════════════════════════════════════════════════════════════
   EMBER PARTICLES — Тлеющие угольки (CSS декорация)
   ═══════════════════════════════════════════════════════════════════════════ */

.ember-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}

.ember-particle {
  position: absolute;
  width: 3px;
  height: 3px;
  background: var(--color-ember);
  border-radius: 50%;
  box-shadow: 0 0 6px var(--color-ember-glow);
  opacity: 0;
  animation: ember-rise 4s ease-out infinite;
}

.ember-particle:nth-child(1) {
  left: 10%;
  bottom: 0;
  animation-delay: 0s;
}

.ember-particle:nth-child(2) {
  left: 30%;
  bottom: 0;
  animation-delay: 1.2s;
  width: 2px;
  height: 2px;
}

.ember-particle:nth-child(3) {
  left: 60%;
  bottom: 0;
  animation-delay: 2.4s;
}

.ember-particle:nth-child(4) {
  left: 85%;
  bottom: 0;
  animation-delay: 0.8s;
  width: 4px;
  height: 4px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   FORM UTILITIES
   ═══════════════════════════════════════════════════════════════════════════ */

.form-row {
  margin-bottom: 12px;
}

.form-grid {
  display: grid;
  gap: 8px;
}

.form-grid-2 {
  grid-template-columns: repeat(2, 1fr);
}

.form-grid-3 {
  grid-template-columns: repeat(3, 1fr);
}

.btn-group {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.btn-group .btn {
  min-width: 80px;
}

.space-y-safe > * + * {
  margin-top: 12px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   MULTIPLIER COLORS
   ═══════════════════════════════════════════════════════════════════════════ */

.multiplier-resist {
  color: var(--color-heal-bright);
}

.multiplier-normal {
  color: var(--color-faded);
}

.multiplier-vulnerable {
  color: var(--color-blood-bright);
}

/* ═══════════════════════════════════════════════════════════════════════════
   RESPONSIVE — Адаптивность для узких экранов
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 400px) {
  .form-grid-2,
  .form-grid-3 {
    grid-template-columns: 1fr;
  }

  .btn-group {
    flex-direction: column;
  }

  .btn-group .btn {
    width: 100%;
  }

  .modal-box {
    width: calc(100% - 16px);
  }

  .dice-overlay-number {
    font-size: 56px;
  }

  .dice-overlay-badge {
    font-size: 9px;
    padding: 5px 16px;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   ADDITIONAL UTILITIES
   ═══════════════════════════════════════════════════════════════════════════ */

/* Для ErrorBoundary и пустых состояний */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px;
  height: 100%;
  text-align: center;
}

.empty-state-icon {
  font-size: 48px;
  margin-bottom: 16px;
  animation: float 3s ease-in-out infinite;
  filter: grayscale(0.3);
}

/* Золотые рамки для акцентов */
.frame-corner {
  position: fixed;
  width: 14px;
  height: 14px;
  border: 2px solid var(--color-gold-dark);
  opacity: 0.4;
  z-index: 9997;
  pointer-events: none;
}

.frame-tl {
  top: 2px;
  left: 2px;
  border-right: none;
  border-bottom: none;
}

.frame-tr {
  top: 2px;
  right: 2px;
  border-left: none;
  border-bottom: none;
}

.frame-bl {
  bottom: 2px;
  left: 2px;
  border-right: none;
  border-top: none;
}

.frame-br {
  bottom: 2px;
  right: 2px;
  border-left: none;
  border-top: none;
}

.app-frame {
  position: relative;
}

/* Текстовые классы для Tailwind */
.text-gold { color: var(--color-gold); }
.text-gold-bright { color: var(--color-gold-bright); }
.text-blood-bright { color: var(--color-blood-bright); }
.text-mana-bright { color: var(--color-mana-bright); }
.text-heal-bright { color: var(--color-heal-bright); }
.text-ember { color: var(--color-ember); }
.text-bone { color: var(--color-bone); }
.text-ancient { color: var(--color-ancient); }
.text-faded { color: var(--color-faded); }
.text-dim { color: var(--color-dim); }

.bg-abyss { background-color: var(--color-abyss); }
.bg-obsidian { background-color: var(--color-obsidian); }
.bg-dark { background-color: var(--color-dark); }
.bg-panel { background-color: var(--color-panel); }
.bg-parchment { background-color: var(--color-parchment); }

.border-edge-bone { border-color: var(--color-edge-bone); }
.border-gold { border-color: var(--color-gold); }
.border-gold-dark { border-color: var(--color-gold-dark); }
.border-blood { border-color: var(--color-blood); }
.border-mana { border-color: var(--color-mana); }
