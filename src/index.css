@import "tailwindcss";

/* ============================================================
   CURSED HEARTS — GRIMOIRE THEME
   ============================================================ */

/* === CSS VARIABLES === */
:root {
  /* Backgrounds */
  --color-abyss: #030303;
  --color-obsidian: #080706;
  --color-dark: #0c0a09;
  --color-panel: #0f0d0c;
  --color-parchment: #1a1614;
  --color-parchment-light: #2a2420;

  /* Text */
  --color-bone: #d4c8b8;
  --color-ancient: #b8a892;
  --color-faded: #7a6f62;
  --color-dim: #4a433a;

  /* Gold */
  --color-gold-bright: #ffd700;
  --color-gold: #d4a726;
  --color-gold-dark: #8b6914;
  --color-gold-shadow: rgba(212, 167, 38, 0.3);

  /* Blood */
  --color-blood-bright: #ff2a2a;
  --color-blood: #8b0000;
  --color-blood-dark: #4a0000;
  --color-blood-glow: rgba(139, 0, 0, 0.4);

  /* Mana */
  --color-mana-bright: #4a9eff;
  --color-mana: #1a4a8b;
  --color-mana-dark: #0a2040;
  --color-mana-glow: rgba(74, 158, 255, 0.3);

  /* Edges */
  --color-edge-bone: #3a332a;
  --color-edge-rust: #4a3020;
  --color-edge-gold: rgba(212, 167, 38, 0.2);

  /* Success / Heal */
  --color-heal: #2d8b3a;
  --color-heal-bright: #4ade80;
  --color-heal-glow: rgba(74, 222, 128, 0.3);
}

/* === TAILWIND v4 THEME === */
@theme {
  --font-cinzel: 'Cinzel', serif;
  --font-cinzel-decorative: 'Cinzel Decorative', 'Cinzel', serif;
  --font-garamond: 'EB Garamond', Georgia, serif;
  --font-medieval: 'MedievalSharp', cursive;

  --color-abyss: #030303;
  --color-obsidian: #080706;
  --color-dark: #0c0a09;
  --color-panel: #0f0d0c;
  --color-parchment: #1a1614;
  --color-parchment-light: #2a2420;
  --color-bone: #d4c8b8;
  --color-ancient: #b8a892;
  --color-faded: #7a6f62;
  --color-dim: #4a433a;
  --color-gold-bright: #ffd700;
  --color-gold: #d4a726;
  --color-gold-dark: #8b6914;
  --color-blood-bright: #ff2a2a;
  --color-blood: #8b0000;
  --color-blood-dark: #4a0000;
  --color-mana-bright: #4a9eff;
  --color-mana: #1a4a8b;
  --color-mana-dark: #0a2040;
  --color-edge-bone: #3a332a;
  --color-edge-rust: #4a3020;
  --color-heal: #2d8b3a;
  --color-heal-bright: #4ade80;
}

/* === BASE === */
* { box-sizing: border-box; }

html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'EB Garamond', Georgia, serif;
  background-color: var(--color-abyss);
  color: var(--color-bone);
  font-size: 14px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  overflow: hidden;
}

/* === GRAIN TEXTURE OVERLAY === */
#root::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

/* === VIGNETTE === */
#root::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9998;
  pointer-events: none;
  background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.6) 100%);
}

/* === SCROLLBAR === */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: var(--color-obsidian); }
::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--color-gold-dark), var(--color-edge-rust));
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover { background: var(--color-gold); }

/* === HEADINGS === */
.heading {
  font-family: 'Cinzel', serif;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--color-gold);
}

.heading-decorative {
  font-family: 'Cinzel Decorative', serif;
  text-transform: uppercase;
  letter-spacing: 3px;
}

/* ============================================================
   ANIMATIONS — KEYFRAMES
   ============================================================ */

/* Blood pulse when HP is low */
@keyframes pulse-blood {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; box-shadow: 0 0 12px var(--color-blood); }
}

/* Mana shimmer */
@keyframes shimmer-mana {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Generic glow */
@keyframes glow {
  0%, 100% { box-shadow: 0 0 5px currentColor; }
  50% { box-shadow: 0 0 15px currentColor, 0 0 30px currentColor; }
}

/* Rune activation on button click */
@keyframes rune-activate {
  0% { box-shadow: 0 0 0 0 var(--color-gold-shadow); }
  50% { box-shadow: 0 0 20px 5px var(--color-gold-shadow); }
  100% { box-shadow: 0 0 0 0 transparent; }
}

/* Screen shake on damage */
@keyframes screen-shake {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-3px, -2px); }
  20% { transform: translate(3px, 1px); }
  30% { transform: translate(-2px, 3px); }
  40% { transform: translate(2px, -2px); }
  50% { transform: translate(-1px, 2px); }
  60% { transform: translate(3px, -1px); }
  70% { transform: translate(-3px, 1px); }
  80% { transform: translate(1px, -3px); }
  90% { transform: translate(-1px, 2px); }
}

/* Gold flash on crit 20 */
@keyframes crit-flash {
  0% { opacity: 0; }
  20% { opacity: 0.3; }
  100% { opacity: 0; }
}

/* Blood vignette on crit fail */
@keyframes fail-flash {
  0% { opacity: 0; }
  30% { opacity: 0.5; }
  100% { opacity: 0; }
}

/* Heal pulse */
@keyframes heal-pulse {
  0% { box-shadow: 0 0 0 0 var(--color-heal-glow); }
  50% { box-shadow: 0 0 20px 8px var(--color-heal-glow); }
  100% { box-shadow: 0 0 0 0 transparent; }
}

/* Blood drip on HP bar */
@keyframes blood-drip {
  0% { transform: translateY(-100%); opacity: 0; }
  20% { opacity: 1; }
  100% { transform: translateY(300%); opacity: 0; }
}

/* Mana particles float up */
@keyframes mana-particle-rise {
  0% { transform: translateY(0) scale(1); opacity: 0.8; }
  100% { transform: translateY(-20px) scale(0); opacity: 0; }
}

/* Scroll unfurl for dice results */
@keyframes unfurl {
  0% { max-height: 0; opacity: 0; transform: scaleY(0.3); }
  100% { max-height: 500px; opacity: 1; transform: scaleY(1); }
}

/* Fade in from below */
@keyframes fade-in-up {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* Toast slide in */
@keyframes toast-enter {
  0% { opacity: 0; transform: translateX(100%) scale(0.9); }
  100% { opacity: 1; transform: translateX(0) scale(1); }
}

/* Toast slide out */
@keyframes toast-exit {
  0% { opacity: 1; transform: translateX(0) scale(1); }
  100% { opacity: 0; transform: translateX(100%) scale(0.8); }
}

/* Card flip */
@keyframes card-flip-in {
  0% { transform: rotateY(90deg); opacity: 0; }
  100% { transform: rotateY(0deg); opacity: 1; }
}

/* Loading spinner */
@keyframes spin-rune {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Subtle float */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

/* Border glow cycle */
@keyframes border-glow {
  0%, 100% { border-color: var(--color-edge-bone); }
  50% { border-color: var(--color-gold-dark); }
}

/* Tab indicator slide */
@keyframes tab-indicator {
  0% { width: 0; }
  100% { width: 100%; }
}

/* Ember flicker */
@keyframes ember {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

/* === UTILITY ANIMATION CLASSES === */
.animate-pulse-blood { animation: pulse-blood 1.5s ease-in-out infinite; }
.animate-shimmer-mana {
  background: linear-gradient(90deg, var(--color-mana) 0%, var(--color-mana-bright) 50%, var(--color-mana) 100%);
  background-size: 200% 100%;
  animation: shimmer-mana 2s linear infinite;
}
.animate-glow { animation: glow 2s ease-in-out infinite; }
.animate-screen-shake { animation: screen-shake 0.4s ease-out; }
.animate-crit-flash { animation: crit-flash 0.6s ease-out forwards; }
.animate-fail-flash { animation: fail-flash 0.6s ease-out forwards; }
.animate-heal-pulse { animation: heal-pulse 0.8s ease-out; }
.animate-unfurl {
  animation: unfurl 0.4s ease-out forwards;
  transform-origin: top center;
  overflow: hidden;
}
.animate-fade-in-up { animation: fade-in-up 0.3s ease-out; }
.animate-toast-enter { animation: toast-enter 0.3s ease-out; }
.animate-card-flip { animation: card-flip-in 0.5s ease-out; }
.animate-float { animation: float 3s ease-in-out infinite; }

/* ============================================================
   GRIMOIRE PANELS
   ============================================================ */
.panel {
  position: relative;
  background: linear-gradient(135deg, var(--color-panel) 0%, var(--color-obsidian) 100%);
  border: 1px solid var(--color-edge-bone);
  border-radius: 2px;
}

/* Decorative gold corners */
.panel::before,
.panel::after {
  content: '';
  position: absolute;
  width: 10px;
  height: 10px;
  border: 2px solid var(--color-gold-dark);
  opacity: 0.6;
  pointer-events: none;
}
.panel::before {
  top: -1px; left: -1px;
  border-right: none; border-bottom: none;
}
.panel::after {
  top: -1px; right: -1px;
  border-left: none; border-bottom: none;
}

.panel-bottom-corners {
  position: relative;
}
.panel-bottom-corners::before,
.panel-bottom-corners::after {
  content: '';
  position: absolute;
  width: 10px;
  height: 10px;
  border: 2px solid var(--color-gold-dark);
  opacity: 0.6;
  pointer-events: none;
}
.panel-bottom-corners::before {
  bottom: -1px; left: -1px;
  border-right: none; border-top: none;
}
.panel-bottom-corners::after {
  bottom: -1px; right: -1px;
  border-left: none; border-top: none;
}

/* Section divider ornament */
.divider-ornament {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.divider-ornament::before,
.divider-ornament::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--color-gold-dark), transparent);
}

/* ============================================================
   BUTTONS — RUNE SEALS
   ============================================================ */
.btn {
  font-family: 'Cinzel', serif;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-size: 0.75rem;
  cursor: pointer;
  border: 1px solid;
  min-width: 60px;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
  transition: all 0.25s ease;
}

.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.25s;
}
.btn:hover:not(:disabled)::after { opacity: 1; }

.btn:active:not(:disabled) {
  animation: rune-activate 0.4s ease-out;
  transform: scale(0.97);
}

.btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  filter: grayscale(0.5);
}

.btn-gold {
  background: linear-gradient(145deg, var(--color-gold-dark) 0%, var(--color-panel) 50%, var(--color-gold-dark) 100%);
  border-color: var(--color-gold);
  color: var(--color-gold-bright);
  text-shadow: 0 0 8px var(--color-gold-shadow);
}
.btn-gold:hover:not(:disabled) {
  box-shadow: 0 0 15px var(--color-gold-shadow), inset 0 0 15px rgba(212,167,38,0.1);
  border-color: var(--color-gold-bright);
}

.btn-blood, .btn-danger {
  background: linear-gradient(145deg, var(--color-blood-dark) 0%, var(--color-panel) 50%, var(--color-blood-dark) 100%);
  border-color: var(--color-blood);
  color: var(--color-blood-bright);
  text-shadow: 0 0 8px var(--color-blood-glow);
}
.btn-blood:hover:not(:disabled),
.btn-danger:hover:not(:disabled) {
  box-shadow: 0 0 15px var(--color-blood-glow), inset 0 0 15px rgba(139,0,0,0.1);
  border-color: var(--color-blood-bright);
}

.btn-mana {
  background: linear-gradient(145deg, var(--color-mana-dark) 0%, var(--color-panel) 50%, var(--color-mana-dark) 100%);
  border-color: var(--color-mana);
  color: var(--color-mana-bright);
  text-shadow: 0 0 8px var(--color-mana-glow);
}
.btn-mana:hover:not(:disabled) {
  box-shadow: 0 0 15px var(--color-mana-glow), inset 0 0 15px rgba(74,158,255,0.1);
  border-color: var(--color-mana-bright);
}

.btn-success {
  background: linear-gradient(145deg, #1a3d20 0%, var(--color-panel) 50%, #1a3d20 100%);
  border-color: var(--color-heal);
  color: var(--color-heal-bright);
  text-shadow: 0 0 8px var(--color-heal-glow);
}
.btn-success:hover:not(:disabled) {
  box-shadow: 0 0 15px var(--color-heal-glow), inset 0 0 15px rgba(45,139,58,0.1);
  border-color: var(--color-heal-bright);
}

.btn-secondary {
  background: linear-gradient(145deg, var(--color-parchment) 0%, var(--color-panel) 100%);
  border-color: var(--color-edge-bone);
  color: var(--color-ancient);
}
.btn-secondary:hover:not(:disabled) {
  border-color: var(--color-ancient);
  color: var(--color-bone);
  box-shadow: 0 0 8px rgba(58,51,42,0.5);
}

/* ============================================================
   INPUTS — AGED PARCHMENT
   ============================================================ */
input, select, textarea {
  font-family: 'EB Garamond', Georgia, serif;
  background: var(--color-obsidian);
  border: 1px solid var(--color-edge-bone);
  color: var(--color-bone);
  padding: 0.5rem;
  border-radius: 2px;
  transition: all 0.2s ease;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--color-gold);
  box-shadow: 0 0 8px var(--color-gold-shadow), inset 0 0 4px rgba(212,167,38,0.05);
}

input[type="number"] { -moz-appearance: textfield; }
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

select {
  padding-right: 2rem;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%237a6f62'%3E%3Cpath d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.5rem center;
}

/* ============================================================
   HP BAR — BLOOD VESSEL
   ============================================================ */
.hp-bar-container {
  position: relative;
  height: 22px;
  background: linear-gradient(180deg, #1a0505 0%, #0a0202 100%);
  border: 1px solid var(--color-blood-dark);
  border-radius: 2px;
  overflow: hidden;
}

.hp-bar-fill {
  height: 100%;
  background: linear-gradient(180deg, #cc1a1a 0%, #8b0000 40%, #5c0000 100%);
  border-radius: 1px;
  transition: width 0.5s ease-out;
  position: relative;
  box-shadow: inset 0 1px 0 rgba(255,100,100,0.3), 0 0 8px var(--color-blood-glow);
}

/* Liquid surface highlight */
.hp-bar-fill::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 4px;
  right: 4px;
  height: 3px;
  background: linear-gradient(90deg, transparent, rgba(255,150,150,0.15), transparent);
  border-radius: 1px;
}

.hp-bar-low .hp-bar-fill {
  animation: pulse-blood 1.5s ease-in-out infinite;
}

.hp-bar-label {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel', serif;
  font-size: 11px;
  font-weight: 700;
  color: var(--color-bone);
  text-shadow: 0 1px 3px rgba(0,0,0,0.8);
  z-index: 1;
  letter-spacing: 1px;
}

/* ============================================================
   MANA BAR — ARCANE CRYSTAL
   ============================================================ */
.mana-bar-container {
  position: relative;
  height: 18px;
  background: linear-gradient(180deg, #0a0a20 0%, #050510 100%);
  border: 1px solid var(--color-mana-dark);
  border-radius: 2px;
  overflow: hidden;
}

.mana-bar-fill {
  height: 100%;
  background: linear-gradient(180deg, #3a8aee 0%, #1a4a8b 40%, #0a2a5b 100%);
  background-size: 200% 100%;
  animation: shimmer-mana 3s linear infinite;
  border-radius: 1px;
  transition: width 0.5s ease-out;
  position: relative;
  box-shadow: inset 0 1px 0 rgba(100,180,255,0.3), 0 0 8px var(--color-mana-glow);
}

/* Crystal facet highlight */
.mana-bar-fill::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 10%;
  width: 30%;
  height: 4px;
  background: linear-gradient(90deg, transparent, rgba(150,200,255,0.2), transparent);
  border-radius: 2px;
}

.mana-bar-label {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel', serif;
  font-size: 10px;
  font-weight: 700;
  color: var(--color-mana-bright);
  text-shadow: 0 1px 3px rgba(0,0,0,0.8);
  z-index: 1;
  letter-spacing: 1px;
}

/* ============================================================
   DICE RESULTS
   ============================================================ */
.dice-crit {
  color: var(--color-gold-bright) !important;
  text-shadow: 0 0 12px var(--color-gold), 0 0 24px var(--color-gold-shadow);
}

.dice-fail {
  color: var(--color-blood-bright) !important;
  text-shadow: 0 0 12px var(--color-blood), 0 0 24px var(--color-blood-glow);
}

.dice-result-card {
  background: linear-gradient(135deg, var(--color-parchment) 0%, var(--color-obsidian) 100%);
  border: 1px solid var(--color-edge-bone);
  border-radius: 2px;
  padding: 0.5rem 0.75rem;
  position: relative;
}

.dice-result-card.crit {
  border-color: var(--color-gold);
  box-shadow: 0 0 12px var(--color-gold-shadow);
}

.dice-result-card.fail {
  border-color: var(--color-blood);
  box-shadow: 0 0 8px var(--color-blood-glow);
}

/* ============================================================
   TABS — GRIMOIRE BOOKMARKS
   ============================================================ */
.tab-active {
  background: linear-gradient(180deg, var(--color-panel) 0%, var(--color-parchment) 100%);
  color: var(--color-gold);
  position: relative;
}

.tab-active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 15%;
  right: 15%;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--color-gold), transparent);
  animation: tab-indicator 0.3s ease-out;
}

.tab-inactive {
  background: var(--color-obsidian);
  color: var(--color-dim);
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
}

.tab-inactive:hover {
  color: var(--color-faded);
  background: rgba(15,13,12,0.8);
}

/* ============================================================
   NOTIFICATION TOAST — BURNING SCROLL
   ============================================================ */
.toast {
  position: relative;
  padding: 0.625rem 1rem;
  border-radius: 2px;
  font-family: 'EB Garamond', Georgia, serif;
  font-size: 0.8125rem;
  animation: toast-enter 0.3s ease-out;
  border: 1px solid;
  backdrop-filter: blur(8px);
}

.toast-success {
  background: linear-gradient(135deg, rgba(45,139,58,0.15), rgba(5,5,5,0.9));
  border-color: var(--color-heal);
  color: var(--color-heal-bright);
  box-shadow: 0 0 12px rgba(45,139,58,0.2);
}

.toast-error {
  background: linear-gradient(135deg, rgba(139,0,0,0.2), rgba(5,5,5,0.9));
  border-color: var(--color-blood);
  color: var(--color-blood-bright);
  box-shadow: 0 0 12px var(--color-blood-glow);
}

.toast-info {
  background: linear-gradient(135deg, rgba(74,158,255,0.1), rgba(5,5,5,0.9));
  border-color: var(--color-mana);
  color: var(--color-mana-bright);
  box-shadow: 0 0 12px var(--color-mana-glow);
}

.toast-warning {
  background: linear-gradient(135deg, rgba(212,167,38,0.15), rgba(5,5,5,0.9));
  border-color: var(--color-gold-dark);
  color: var(--color-gold);
  box-shadow: 0 0 12px var(--color-gold-shadow);
}

/* ============================================================
   SECTIONS — GRIMOIRE PAGES
   ============================================================ */
.grimoire-section {
  background: linear-gradient(180deg, var(--color-panel) 0%, rgba(8,7,6,0.8) 100%);
  border: 1px solid var(--color-edge-bone);
  border-radius: 2px;
  position: relative;
}

.grimoire-section-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  border-bottom: 1px solid var(--color-edge-bone);
  background: linear-gradient(90deg, rgba(212,167,38,0.05), transparent, rgba(212,167,38,0.05));
  cursor: default;
  user-select: none;
}

.grimoire-section-header h3 {
  font-family: 'Cinzel', serif;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--color-gold);
  margin: 0;
  flex: 1;
}

.grimoire-section-header .collapse-icon {
  color: var(--color-faded);
  font-size: 0.625rem;
  transition: transform 0.2s ease;
}

.grimoire-section-header.collapsible {
  cursor: pointer;
}
.grimoire-section-header.collapsible:hover h3 {
  text-shadow: 0 0 8px var(--color-gold-shadow);
}

.grimoire-section-body {
  padding: 0.75rem;
}

/* ============================================================
   MODAL — DARK RITUAL OVERLAY
   ============================================================ */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(3,3,3,0.85);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  animation: fade-in-up 0.2s ease-out;
}

.modal-content {
  background: linear-gradient(180deg, var(--color-dark) 0%, var(--color-abyss) 100%);
  border: 1px solid var(--color-gold-dark);
  border-radius: 3px;
  width: calc(100% - 2rem);
  max-height: calc(100vh - 4rem);
  overflow-y: auto;
  position: relative;
  box-shadow: 0 0 30px rgba(0,0,0,0.8), 0 0 10px var(--color-gold-shadow);
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--color-edge-bone);
  background: linear-gradient(90deg, rgba(212,167,38,0.08), transparent, rgba(212,167,38,0.08));
}

.modal-header h2 {
  font-family: 'Cinzel', serif;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--color-gold);
  margin: 0;
}

.modal-body {
  padding: 1rem;
}

/* ============================================================
   CARD FLIP (for Rok Cards)
   ============================================================ */
.card-3d {
  perspective: 800px;
}

.card-3d-inner {
  transition: transform 0.5s ease;
  transform-style: preserve-3d;
}

.card-3d-inner.flipped {
  animation: card-flip-in 0.5s ease-out;
}

/* ============================================================
   SCREEN EFFECTS LAYER
   ============================================================ */
.effects-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9990;
}

.effect-crit-flash {
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(255,215,0,0.3), rgba(212,167,38,0.1), transparent 70%);
  animation: crit-flash 0.6s ease-out forwards;
}

.effect-fail-flash {
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 30%, rgba(139,0,0,0.3) 100%);
  animation: fail-flash 0.6s ease-out forwards;
}

.effect-heal-flash {
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(74,222,128,0.15), transparent 70%);
  animation: crit-flash 0.6s ease-out forwards;
}

/* ============================================================
   LOADING SPINNER — RUNE CIRCLE
   ============================================================ */
.rune-spinner {
  width: 40px;
  height: 40px;
  border: 2px solid var(--color-edge-bone);
  border-top-color: var(--color-gold);
  border-radius: 50%;
  animation: spin-rune 1s linear infinite;
  box-shadow: 0 0 8px var(--color-gold-shadow);
}

/* ============================================================
   FORM UTILITIES
   ============================================================ */
.form-row { margin-bottom: 0.75rem; }
.form-grid { display: grid; gap: 0.5rem; }
.form-grid-2 { grid-template-columns: repeat(2, 1fr); }
.form-grid-3 { grid-template-columns: repeat(3, 1fr); }

.btn-group { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.btn-group .btn { min-width: 80px; }

.space-y-safe > * + * { margin-top: 0.75rem; }

.sub-tabs { display: flex; flex-wrap: wrap; gap: 0.25rem; }
.sub-tab {
  padding: 0.375rem 0.75rem;
  font-size: 0.6875rem;
  white-space: nowrap;
  font-family: 'Cinzel', serif;
  text-transform: uppercase;
  letter-spacing: 1px;
  border: 1px solid var(--color-edge-bone);
  background: var(--color-obsidian);
  color: var(--color-faded);
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 1px;
}
.sub-tab:hover { color: var(--color-ancient); border-color: var(--color-ancient); }
.sub-tab.active {
  background: var(--color-panel);
  border-color: var(--color-gold-dark);
  color: var(--color-gold);
  box-shadow: 0 0 6px var(--color-gold-shadow);
}

/* Multiplier colors */
.multiplier-resist { color: #22c55e; }
.multiplier-normal { color: var(--color-faded); }
.multiplier-vulnerable { color: var(--color-blood-bright); }

/* Empty state */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  height: 100%;
  text-align: center;
}

.empty-state-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
  animation: float 3s ease-in-out infinite;
  filter: grayscale(0.3);
}

/* Responsive */
@media (max-width: 400px) {
  .form-grid-2, .form-grid-3 { grid-template-columns: 1fr; }
  .btn-group { flex-direction: column; }
  .btn-group .btn { width: 100%; }
}
